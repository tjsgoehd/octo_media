<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCTHPATH - Premium Archive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        :root { --primary: #326cf4; --bg-gray: #f8f9fa; }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg-gray); letter-spacing: -0.02em; }
        
        .video-card { background: white; border-radius: 24px; overflow: hidden; transition: all 0.3s ease; border: 1px solid rgba(0,0,0,0.04); cursor: pointer; }
        .video-card:hover { transform: translateY(-8px); box-shadow: 0 20px 30px -10px rgba(0, 0, 0, 0.08); }
        
        .category-btn { transition: all 0.2s; border: 1px solid #eee; background: white; color: #667085; }
        .category-btn.active { background-color: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 12px rgba(50, 108, 244, 0.2); }
        
        .modal-content { animation: modalUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); border-radius: 32px; overflow: hidden; }
        @keyframes modalUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        .custom-input { background-color: #f9fafb; border: 1px solid #f2f4f7; transition: all 0.2s; outline: none; }
        .custom-input:focus { background-color: white; border-color: var(--primary); ring: 4px rgba(50, 108, 244, 0.1); }
        
        .upload-zone { border: 2px dashed #eaecf0; transition: all 0.2s; cursor: pointer; position: relative; }
        .upload-zone.loading { pointer-events: none; opacity: 0.6; }

        .thumbnail-option { border: 3px solid transparent; border-radius: 12px; transition: all 0.2s; cursor: pointer; position: relative; overflow: hidden; }
        .thumbnail-option.selected { border-color: var(--primary); transform: scale(1.05); z-index: 10; }
        .thumbnail-option.selected::after { content: 'âœ“'; position: absolute; top: 4px; right: 4px; background: var(--primary); color: white; width: 20px; height: 20px; border-radius: 50%; display: flex; items-center; justify-center; font-size: 10px; font-weight: bold; }

        .loader { border: 3px solid #f3f3f3; border-top: 3px solid var(--primary); border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        canvas#thumb-canvas { display: none; }
        video#temp-video { display: none; }
    </style>
</head>
<body class="text-slate-900">

    <canvas id="thumb-canvas"></canvas>
    <video id="temp-video" preload="metadata" crossorigin="anonymous"></video>

    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-6 h-18 flex items-center justify-between py-4">
            <div class="flex items-center gap-10">
                <div class="flex items-center gap-2.5 cursor-pointer" onclick="location.reload()">
                    <div class="w-9 h-9 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200">
                        <i data-lucide="play" fill="currentColor" class="w-4 h-4 ml-0.5"></i>
                    </div>
                    <span class="font-bold text-2xl tracking-tight">ì˜¥íŠœë¸Œ</span>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button id="admin-upload-btn" onclick="toggleUploadModal(true)" class="hidden bg-slate-900 text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-black transition-all">ìƒˆ ì˜ìƒ ë“±ë¡</button>
                <button id="auth-btn" onclick="handleAuthClick()" class="flex items-center gap-2 border border-slate-200 px-5 py-2.5 rounded-full text-slate-600 font-bold text-sm hover:bg-slate-50 transition-all">
                    <i data-lucide="user" class="w-4 h-4"></i>
                    <span id="auth-btn-text">ì—°ê²° ì¤‘...</span>
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12">
        <div class="mb-14 text-center">
            <h1 class="text-4xl font-extrabold mb-3 tracking-tight">ğŸ”¥ì˜¥íŒ¨ì˜ìƒ ì €ì¥ì†ŒğŸ”¥</h1>
            <p class="text-slate-500 text-lg font-medium">Cloudinary í˜¸ìŠ¤íŒ…ì„ í†µí•œ ì˜êµ¬ DBê¸°ë¡</p>
        </div>

        <div class="flex flex-col md:flex-row items-center justify-between mb-10 gap-6">
            <div id="category-container" class="flex gap-3 overflow-x-auto no-scrollbar pb-2"></div>
            <div class="flex items-center gap-3 text-sm font-medium text-slate-400 bg-white px-4 py-2 rounded-full border border-gray-50">
                <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                <span id="sync-status">ì‹¤ì‹œê°„ í´ë¼ìš°ë“œ ì—°ê²°ë¨</span>
            </div>
        </div>

        <div id="video-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <div id="initial-loading" class="col-span-full flex flex-col items-center justify-center py-40 gap-5">
                <div class="loader"></div>
                <p class="text-slate-400 font-bold italic tracking-wider">DATABASE SYNCING...</p>
            </div>
        </div>
    </main>

    <div id="upload-modal" class="fixed inset-0 bg-black/60 backdrop-blur-md z-[100] hidden items-center justify-center p-4">
        <div class="bg-white modal-content w-full max-w-2xl shadow-2xl flex flex-col max-h-[95vh]">
            <div class="flex items-center justify-between px-8 py-6 border-b border-gray-100">
                <h2 class="text-xl font-bold text-slate-900">ì˜êµ¬ ì €ì¥ìš© ì˜ìƒ ì—…ë¡œë“œ</h2>
                <button onclick="toggleUploadModal(false)" class="text-slate-400 hover:text-slate-900 p-2"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            
            <form id="upload-form" class="p-8 space-y-7 overflow-y-auto">
                <div class="space-y-2">
                    <label class="text-sm font-bold text-slate-700 ml-1">ì œëª©</label>
                    <input required id="video-title" type="text" class="w-full custom-input rounded-2xl px-5 py-4" placeholder="ì˜ìƒ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>

                <div class="grid grid-cols-2 gap-5">
                    <div class="space-y-2">
                        <label class="text-sm font-bold text-slate-700 ml-1">ì¹´í…Œê³ ë¦¬</label>
                        <select id="video-category" class="w-full custom-input rounded-2xl px-5 py-4 appearance-none font-medium">
                            <option value="ë‹¨ê¸°ì»·">ë‹¨ê¸°ì»·</option>
                            <option value="ê³µëµ">ê³µëµ</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-bold text-slate-700 ml-1">ì‘ì„±ì</label>
                        <input required id="video-author" type="text" class="w-full custom-input rounded-2xl px-5 py-4 font-medium" value="GetStar">
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="text-sm font-bold text-slate-700 ml-1">ì˜ìƒ íŒŒì¼ ì„ íƒ</label>
                    <input type="file" id="video-file-input" class="hidden" accept="video/*">
                    <div id="upload-dropzone" onclick="document.getElementById('video-file-input').click()" class="upload-zone rounded-2xl p-8 flex flex-col items-center justify-center gap-3">
                        <div id="dropzone-default" class="text-center">
                            <i data-lucide="video" class="w-10 h-10 text-slate-300 mx-auto"></i>
                            <p class="text-sm text-slate-400 mt-2 font-medium">í´ë¦­í•˜ì—¬ ì˜ìƒì„ ì„ íƒí•˜ì„¸ìš”.</p>
                        </div>
                        <div id="extraction-loader" class="hidden flex flex-col items-center gap-2">
                            <div class="loader"></div>
                            <p class="text-xs font-bold text-blue-600">ì˜ìƒ í”„ë ˆì„ ë¶„ì„ ì¤‘...</p>
                        </div>
                        <div id="dropzone-selected" class="hidden text-center">
                            <div class="flex items-center gap-2 text-blue-600 font-bold mb-1">
                                <i data-lucide="film" class="w-5 h-5"></i>
                                <span id="selected-filename"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="thumb-selection-area" class="space-y-3 hidden">
                    <label class="text-sm font-bold text-slate-700 ml-1 font-bold">ì¸ë„¤ì¼ ì„ íƒ (í´ë¦­í•˜ì—¬ ì§€ì •)</label>
                    <div id="thumbnail-grid" class="grid grid-cols-5 gap-2"></div>
                </div>

                <div class="pt-4 sticky bottom-0 bg-white border-t border-gray-50 mt-4">
                    <button id="submit-btn" type="submit" class="w-full bg-blue-600 text-white font-bold py-5 rounded-2xl transition-all shadow-xl shadow-blue-100 hover:bg-blue-700 active:scale-[0.98] disabled:bg-slate-300 disabled:shadow-none">Cloudinary ì˜êµ¬ ì—…ë¡œë“œ ì‹œì‘</button>
                    <div id="upload-progress-container" class="hidden mt-4 space-y-2">
                        <div class="flex justify-between text-xs font-bold text-slate-500 px-1">
                            <span id="progress-text">ì—…ë¡œë“œ ì¤€ë¹„ ì¤‘...</span>
                            <span id="progress-percent">0%</span>
                        </div>
                        <div class="w-full bg-gray-100 h-2 rounded-full overflow-hidden">
                            <div id="progress-fill" class="bg-blue-600 h-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div id="login-modal" class="fixed inset-0 bg-black/50 backdrop-blur-md z-[250] hidden items-center justify-center p-4">
        <div class="bg-white modal-content w-full max-w-md shadow-2xl p-10">
            <h2 class="text-2xl font-bold mb-8 text-center">ê´€ë¦¬ì ì¸ì¦</h2>
            <form id="login-form" class="space-y-6">
                <input required id="login-email" type="email" class="w-full custom-input rounded-2xl px-6 py-4 font-medium" value="tjsgoehd@gmail.com" readonly>
                <input required id="login-password" type="password" class="w-full custom-input rounded-2xl px-6 py-4 text-2xl tracking-[0.5em]" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                <div id="login-error" class="text-red-500 text-xs font-bold hidden text-center">ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜</div>
                <button type="submit" class="w-full bg-blue-600 text-white py-5 rounded-2xl font-bold shadow-xl shadow-blue-100">ë¡œê·¸ì¸</button>
                <button type="button" onclick="toggleLoginModal(false)" class="w-full text-slate-400 text-sm font-bold">ì·¨ì†Œ</button>
            </form>
        </div>
    </div>

    <div id="player-modal" class="fixed inset-0 bg-slate-900/98 backdrop-blur-2xl z-[200] hidden items-center justify-center p-0 md:p-8">
        <div class="w-full max-w-6xl bg-white md:rounded-[40px] overflow-hidden shadow-2xl">
            <div class="aspect-video bg-black relative">
                <button onclick="closePlayer()" class="absolute top-6 right-6 z-10 bg-white/10 hover:bg-white/30 text-white p-3 rounded-full backdrop-blur-xl"><i data-lucide="x" class="w-6 h-6"></i></button>
                <div id="video-container" class="w-full h-full"></div>
            </div>
            <div class="p-8 flex justify-between items-center">
                <div>
                    <span id="playing-category" class="text-blue-600 text-xs font-black uppercase tracking-widest"></span>
                    <h2 id="playing-title" class="text-2xl font-bold text-slate-900 mt-1"></h2>
                </div>
                <button onclick="closePlayer()" class="bg-slate-900 text-white px-8 py-3 rounded-2xl font-bold">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAjbApqAPhrZXcnR2P_xd-nvrZOvZp67CI",
            authDomain: "octopath-85851.firebaseapp.com",
            projectId: "octopath-85851",
            storageBucket: "octopath-85851.firebasestorage.app",
            messagingSenderId: "744016190979",
            appId: "1:744016190979:web:fbc5badeda2e24f5f47836"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'octopath-85851';
        const ADMIN_EMAIL = "tjsgoehd@gmail.com";

        const CLOUD_NAME = "dhytg4nc1";
        const UPLOAD_PRESET = "octopath_media";

        let currentUser = null;
        let allVideos = [];
        let currentCategory = 'ì „ì²´';
        let unsubscribe = null;
        let selectedThumbBase64 = '';
        let selectedVideoFile = null;

        onAuthStateChanged(auth, async (user) => {
            currentUser = user;
            if (!user) { await signInAnonymously(auth); return; }
            const isAdmin = !user.isAnonymous && user.email === ADMIN_EMAIL;
            document.getElementById('admin-upload-btn')?.classList.toggle('hidden', !isAdmin);
            document.getElementById('auth-btn-text').innerText = isAdmin ? "ADMIN" : "ê´€ë¦¬ì ë¡œê·¸ì¸";
            if (unsubscribe) unsubscribe();
            startDataListener();
            lucide.createIcons();
        });

        function startDataListener() {
            const videoRef = collection(db, 'artifacts', appId, 'public', 'data', 'videos');
            unsubscribe = onSnapshot(videoRef, (snapshot) => {
                allVideos = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                allVideos.sort((a, b) => (b.createdAt?.toMillis() || Date.now()) - (a.createdAt?.toMillis() || Date.now()));
                document.getElementById('initial-loading')?.classList.add('hidden');
                renderVideos();
            }, (err) => console.error("Firestore Error:", err));
        }

        window.renderVideos = () => {
            const grid = document.getElementById('video-grid');
            const filtered = currentCategory === 'ì „ì²´' ? allVideos : allVideos.filter(v => v.category === currentCategory);
            
            if (filtered.length === 0) {
                grid.innerHTML = `<div class="col-span-full py-20 text-center text-slate-300 font-bold">ë“±ë¡ëœ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            grid.innerHTML = filtered.map(v => `
                <div class="video-card group" onclick="playVideo('${v.url}', '${v.title}', '${v.category}')">
                    <div class="aspect-[16/10] relative bg-slate-100">
                        <img src="${v.thumbnail}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-blue-900/30 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center backdrop-blur-[2px]">
                            <i data-lucide="play" class="text-white w-12 h-12"></i>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="text-[10px] font-black text-blue-600 mb-1 uppercase tracking-widest">${v.category}</div>
                        <h3 class="font-bold text-slate-900 line-clamp-2 h-12">${v.title}</h3>
                        <div class="mt-4 pt-4 border-t border-gray-50 flex items-center gap-2 text-xs text-slate-400 font-bold uppercase tracking-tight">
                            <i data-lucide="user" class="w-3 h-3"></i> ${v.author}
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        };

        const videoInput = document.getElementById('video-file-input');
        videoInput.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // 1. ìƒíƒœ ì´ˆê¸°í™”: ì´ì „ ì—…ë¡œë“œ UI í”ì  ì œê±°
            selectedVideoFile = file;
            const btn = document.getElementById('submit-btn');
            btn.disabled = true; // ë¶„ì„ ì¤‘ì—ëŠ” ë¹„í™œì„±í™”
            btn.innerText = "ì˜ìƒ ë¶„ì„ ì¤‘...";
            document.getElementById('upload-progress-container').classList.add('hidden');
            
            document.getElementById('dropzone-default').classList.add('hidden');
            document.getElementById('extraction-loader').classList.remove('hidden');
            document.getElementById('thumb-selection-area').classList.add('hidden');
            document.getElementById('selected-filename').innerText = file.name;

            const videoUrl = URL.createObjectURL(file);
            const video = document.getElementById('temp-video');
            video.src = videoUrl;

            video.onloadedmetadata = async () => {
                const duration = video.duration;
                const thumbGrid = document.getElementById('thumbnail-grid');
                thumbGrid.innerHTML = "";
                const timePoints = [0.1, duration * 0.25, duration * 0.5, duration * 0.75, duration * 0.95];
                
                for (let i = 0; i < timePoints.length; i++) {
                    video.currentTime = timePoints[i];
                    await new Promise(resolve => video.onseeked = resolve);
                    const canvas = document.getElementById('thumb-canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    const base64 = canvas.toDataURL('image/jpeg', 0.6);
                    const thumbDiv = document.createElement('div');
                    thumbDiv.className = `thumbnail-option shadow-sm ${i === 2 ? 'selected' : ''}`;
                    if(i === 2) selectedThumbBase64 = base64;
                    thumbDiv.innerHTML = `<img src="${base64}" class="w-full aspect-video object-cover">`;
                    thumbDiv.onclick = (ev) => {
                        ev.stopPropagation();
                        ev.preventDefault();
                        document.querySelectorAll('.thumbnail-option').forEach(el => el.classList.remove('selected'));
                        thumbDiv.classList.add('selected');
                        selectedThumbBase64 = base64;
                    };
                    thumbGrid.appendChild(thumbDiv);
                }
                // ë¶„ì„ ì™„ë£Œ í›„ ë²„íŠ¼ í™œì„±í™”
                document.getElementById('extraction-loader').classList.add('hidden');
                document.getElementById('dropzone-selected').classList.remove('hidden');
                document.getElementById('thumb-selection-area').classList.remove('hidden');
                btn.disabled = false;
                btn.innerText = "Cloudinary ì˜êµ¬ ì—…ë¡œë“œ ì‹œì‘";
            };
        });

        document.getElementById('upload-form').onsubmit = async (e) => {
            e.preventDefault();
            if (!selectedVideoFile) return;

            const btn = document.getElementById('submit-btn');
            const progressContainer = document.getElementById('upload-progress-container');
            
            btn.disabled = true;
            btn.innerText = "Cloudinary ì „ì†¡ ì¤‘...";
            progressContainer.classList.remove('hidden');
            
            updateProgress(10, "Cloudinary ì—°ê²° ì¤‘...");

            try {
                const formData = new FormData();
                formData.append("file", selectedVideoFile);
                formData.append("upload_preset", UPLOAD_PRESET);

                const xhr = new XMLHttpRequest();
                xhr.open("POST", `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/video/upload`, true);

                const uploadPromise = new Promise((resolve, reject) => {
                    xhr.upload.onprogress = (event) => {
                        if (event.lengthComputable) {
                            const percent = Math.round((event.loaded / event.total) * 70) + 10;
                            updateProgress(percent, "ì˜ìƒ ë°ì´í„° ì „ì†¡ ì¤‘...");
                        }
                    };
                    xhr.onload = () => {
                        if (xhr.status >= 200 && xhr.status < 300) {
                            resolve(JSON.parse(xhr.responseText));
                        } else {
                            reject(new Error("Cloudinary ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜"));
                        }
                    };
                    xhr.onerror = () => reject(new Error("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜"));
                    xhr.send(formData);
                });

                const json = await uploadPromise;
                updateProgress(90, "ë°ì´í„°ë² ì´ìŠ¤ ì˜êµ¬ ì €ì¥ ì¤‘...");

                const data = {
                    title: document.getElementById('video-title').value,
                    author: document.getElementById('video-author').value,
                    category: document.getElementById('video-category').value,
                    url: json.secure_url, 
                    thumbnail: selectedThumbBase64,
                    createdAt: serverTimestamp()
                };
                
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'videos'), data);
                
                updateProgress(100, "ì—…ë¡œë“œ ì™„ë£Œ!");
                setTimeout(() => toggleUploadModal(false), 800);

            } catch (err) {
                alert("ì—…ë¡œë“œ ì‹¤íŒ¨: " + err.message);
                btn.disabled = false;
                btn.innerText = "ì—…ë¡œë“œ ì¬ì‹œë„";
            }
        };

        function updateProgress(per, text) {
            const fill = document.getElementById('progress-fill');
            const pText = document.getElementById('progress-text');
            const pPercent = document.getElementById('progress-percent');
            if(fill) fill.style.width = per + "%";
            if(pText) pText.innerText = text;
            if(pPercent) pPercent.innerText = per + "%";
        }

        window.toggleUploadModal = (s) => {
            const modal = document.getElementById('upload-modal');
            modal.classList.toggle('hidden', !s);
            if(!s) { 
                document.getElementById('upload-form').reset(); 
                document.getElementById('dropzone-default').classList.remove('hidden'); 
                document.getElementById('dropzone-selected').classList.add('hidden'); 
                document.getElementById('thumb-selection-area').classList.add('hidden'); 
                document.getElementById('upload-progress-container').classList.add('hidden');
                document.getElementById('submit-btn').disabled = false;
                document.getElementById('submit-btn').innerText = "Cloudinary ì˜êµ¬ ì—…ë¡œë“œ ì‹œì‘";
                selectedVideoFile = null;
            }
        };

        window.toggleLoginModal = (s) => document.getElementById('login-modal').classList.toggle('hidden', !s);
        window.handleAuthClick = () => currentUser && !currentUser.isAnonymous ? signOut(auth).then(()=>location.reload()) : toggleLoginModal(true);
        document.getElementById('login-form').onsubmit = async (e) => {
            e.preventDefault();
            const pwd = document.getElementById('login-password').value;
            try { await signInWithEmailAndPassword(auth, ADMIN_EMAIL, pwd); toggleLoginModal(false); } catch { document.getElementById('login-error').classList.remove('hidden'); }
        };

        window.playVideo = (u, t, c) => {
            document.getElementById('video-container').innerHTML = `<video src="${u}" controls autoplay class="w-full h-full bg-black"></video>`;
            document.getElementById('playing-title').innerText = t;
            document.getElementById('playing-category').innerText = c;
            document.getElementById('player-modal').classList.remove('hidden');
            document.getElementById('player-modal').classList.add('flex');
            document.body.style.overflow = 'hidden';
        };
        window.closePlayer = () => { document.getElementById('video-container').innerHTML = ""; document.getElementById('player-modal').classList.remove('flex'); document.getElementById('player-modal').classList.add('hidden'); document.body.style.overflow = 'auto'; };
        
        window.filterByCategory = (cat) => { currentCategory = cat; renderCategories(); renderVideos(); };
        function renderCategories() {
            const cats = ['ì „ì²´', 'ë‹¨ê¸°ì»·', 'ê³µëµ', 'ê¸°íƒ€'];
            document.getElementById('category-container').innerHTML = cats.map(cat => `<button onclick="filterByCategory('${cat}')" class="category-btn px-7 py-2.5 rounded-full text-sm font-bold ${currentCategory === cat ? 'active' : ''}">${cat}</button>`).join('');
        }
        renderCategories();
    </script>
</body>
</html>
